<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd">
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<!-- used by XSLT processors -->
<?rfc strict="yes" ?>
<!-- give errors regarding ID-nits and DTD validation -->
<!-- control the table of contents (ToC) -->
<?rfc toc="yes"?>
<!-- generate a ToC -->
<?rfc tocdepth="4"?>
<!-- the number of levels of subsections in ToC. default: 3 -->
<!-- control references -->
<?rfc symrefs="yes"?>
<!-- use symbolic references tags, i.e, [RFC2119] instead of [1] -->
<?rfc sortrefs="yes" ?>
<!-- sort the reference entries alphabetically -->
<!-- control vertical white space 
     (using these PIs as follows is recommended by the RFC Editor) -->
<?rfc compact="yes" ?>
<!-- do not start each main section on a new page -->
<?rfc subcompact="no" ?>
<!-- keep one blank line between list items -->
<!-- end of list of popular I-D processing instructions -->
<rfc category="info" docName="draft-sarker-rmcat-framework-00"
     ipr="trust200902">
  <!-- category values: std, bcp, info, exp, and historic
     ipr values: full3667, noModification3667, noDerivatives3667
     you can add the attributes updates="NNNN" and obsoletes="NNNN" 
     they will automatically be output with "(if approved)" -->

  <front>
    <!-- The abbreviated title is used in the page header - it is only necessary if the
     full title is longer than 39 characters -->

    <title abbrev="RMCAT framework">Framework for Real-time Media Congestion
    Avoidance Techniques</title>

    <!-- add 'role="editor"' below for the editors if appropriate -->

    <!-- Another author who claims to be an editor -->

    <author fullname="Zaheduzzaman Sarker" initials="Z." surname="Sarker">
      <organization>Ericsson AB</organization>

      <address>
        <postal>
          <street></street>

          <city>Luleae</city>

          <region></region>

          <code></code>

          <country>Sweden</country>
        </postal>

        <phone></phone>

        <email>zaheduzzaman.sarker@ericsson.com</email>
      </address>
    </author>

    <author fullname="Xianqing Zhu" initials="X" surname="Zhu">
      <organization>Cisco</organization>

      <address>
        <postal>
          <street></street>

          <city></city>

          <region></region>

          <code></code>

          <country></country>
        </postal>

        <phone></phone>

        <facsimile></facsimile>

        <email>xiaoqzhu@cisco.com </email>

        <uri></uri>
      </address>
    </author>

    <date day="25" month="" year="2015" />

    <!-- If the month and year are both specified and are the current ones, xml2rfc will fill
     in the current day for you. If only the current year is specified, xml2rfc will fill
	 in the current day and month for you. If the year is not the current one, it is 
	 necessary to specify at least a month (xml2rfc assumes day="1" if not specified for the 
	 purpose of calculating the expiry date).  With drafts it is normally sufficient to 
	 specify just the year. -->

    <!-- Meta-data Declarations -->

    <area>RAI</area>

    <workgroup>RMCAT WG</workgroup>

    <!-- WG name at the upperleft corner of the doc,
     IETF is fine for individual submissions.
	 If this element is not present, the default is "Network Working Group",
     which is used by the RFC Editor as a nod to the history of the IETF. -->

    <keyword>RTP</keyword>

    <!-- Keywords will be incorporated into HTML output
     files in a meta tag but they have no effect on text or nroff
     output. If you submit your draft to the RFC Editor, the
     keywords will be used for the search engine. -->

    <abstract>
      <t>Interactive real-time media applications that use the Real-time
      Transport Protocol (RTP) over the User Datagram Protocol (UDP) must use
      congestion control techniques above the UDP layer since it provides
      none. This memo describes the interactions and conceptual interfaces
      necessary between the application components that relate to congestion
      control, including the RTP layer, the higher-level media codec control
      layer, and the lower-level transport interface, as well as components
      dedicated to congestion control functions.</t>
    </abstract>
  </front>

  <middle>
    <section title="Introduction">
      <t>Interactive real-time media applications most commonly use RTP <xref
      target="RFC3550"></xref> over UDP <xref target="RFC0768"></xref>. Since
      UDP provides no form of congestion control, which is essential for any
      application deployed on the Internet, these RTP applications have
      historically implemented one of the following options at the application
      layer to address their congestion control requirements.</t>

      <t><list style="numbers">
          <t>For media with relatively low packet rates and bit rates, such as
          many speech codecs, some applications use a simple form of
          congestion control that stops transmission permanently or
          temporarily after observing significant packet loss over a
          significant period of time, similar to the RTP circuit breakers
          <xref target="I-D.ietf-avtcore-rtp-circuit-breakers"></xref>.</t>

          <t>Some applications have no explicit congestion control, despite
          the clear requirements in RTP and its profiles AVP <xref
          target="RFC3551"></xref> and AVPF <xref target="RFC4585"></xref>,
          under the expectation that users will terminate media flows that are
          significantly impaired by congestion (in essence, human circuit
          breakers).</t>

          <t>For media with substantially higher packet rates and bit rates,
          such as many video codecs, various non-standard congestion control
          techniques are often used to adapt transmission rate based on
          receiver feedback.</t>

          <t>Some experimental applications use standardized techniques such
          as TCP-Friendly Rate Control (TFRC) <xref target="RFC5348"></xref>.
          However, for various reasons, these have not been widely
          deployed.</t>
        </list></t>

      <t>The RTP Media Congestion Avoidance Techniques (RMCAT) working group
      was chartered to standardize appropriate and effective congestion
      control for RTP applications. It is expected such applications will
      migrate from the above historical solutions to the RMCAT
      solution(s).</t>

      <t>The RMCAT requirements <xref
      target="I-D.ietf-rmcat-cc-requirements"></xref> include low delay,
      reasonably high throughput, fast reaction to capacity changes including
      routing or interface changes, stability without over-reaction or
      oscillation, fair bandwidth sharing with other instances of itself and
      TCP flows, sharing information across multiple flows when possible and
      performing as well or better in networks which support Active Queue
      Management (AQM), Explicit Congestion Notification (ECN), or
      Differentiated Services Code Points (DSCP).</t>

      <t>In order to meet these requirements, interactions are necessary
      between the application's congestion controller, the RTP layer, media
      codecs, other components, and the OS UDP stack. This memo discusses
      these interactions, presents a conceptual model of the required
      interfaces based on a simplified application decomposition, and proposes
      specific information exchange across these interfaces along with
      corresponding component behavior.</t>

      <t>Note that RTP can also operate over other transports with integrated
      congestion control such as TCP <xref target="RFC5681"></xref> and DCCP
      <xref target="RFC4340"></xref>, but that is beyond the scope of RMCAT
      and this memo.</t>
    </section>

    <section title="Key Words for Requirements">
      <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <xref
      target="RFC2119"></xref>.</t>
    </section>

    <section title="Conceptual Model">
      <t>It is useful to decompose an RTP application into several components
      to facilitate understanding and discussion of where congestion control
      functions operate, and how they interface with the other components. The
      conceptual model in <xref target="model1"></xref> consists of the
      following components.</t>

      <figure align="center" anchor="model1">
        <preamble></preamble>

        <artwork align="center"><![CDATA[
+---------------------------------+
|       +-----Config-----+        |
|       |       |        |        |
|       |     Codec <---------+   |
|       |     | | |      |    |   |     
| APP   +-->RTP | RTCP<--+    |   |
|       |     | | |           |   |
|       |     | | |    Rate   |   |
|       |     | | |  control--+   |
|       |     | | |      ^
|       |     v v v      |        |
|       +-->Congestion---+--------|---Shared
|             control             |   State
+---------------------------------+
                 ^                
                 |
                 v
+---------------------------------+
| OS           UDP                |
+---------------------------------+
]]></artwork>

        <postamble></postamble>
      </figure>

      <t><list style="symbols">
          <t>APP: Application containing one or more RTP streams and the
          corresponding media codecs, rate controllers and transport
          congestion detectors. For example, a WebRTC browser.</t>

          <t>Config: Configuration specified by the application that provides
          the media and transport parameters, RTP and RTCP parameters and
          extensions, and rate controler parameters. For example, a WebRTC
          Javascript application may use the 'constraints' API to affect the
          media configuration, and SDP applications may negotiate the media
          and transport parameters (e.g media bandwidth, session bandwidth)
          with the remote peer. This determines the initial static
          configuration negotiated in session establishment. The dynamic state
          may differ due to congestion or other factors, but still must
          conform to limits established in the config.</t>

          <t>Codec: Media encoder/decoder or other source/sink for the RTP
          payload. The codec may be, for example, a simple monaural audio
          format, a complex scalable video codec with several dependent
          layers, or a source/sink with no live encoding/decoding such as a
          mixer which selectively switches and forwards streams rather than
          mixes media.</t>

          <t>RTP: Standard RTP stack functions, including media packetization
          / depacketization and header processing, but excluding existing
          extensions and possible new extensions specific to congestion
          control (CC) such as absolute timestamps or relative transmission
          time offsets in RTP header extensions. </t>

          <t>RTCP: Standard RTCP functions, including sender reports, receiver
          reports, extended reports, circuit breakers <xref
          target="I-D.ietf-avtcore-rtp-circuit-breakers"></xref>, feedback
          messages such as NACK <xref target="RFC4585"></xref> and codec
          control messages such as TMMBR <xref target="RFC5104"></xref>
          including new RTCP extentions for congestion feedback.</t>

          <t>Congestion control: functions and calculations required to detect
          congestion and estime available bandwidth on the transport. The
          statistics gather via RTCP is pass to this module for this purpose.
          It possible that media streams can be multplexed over single
          transport hence the available bandwidth detection can be per stream
          or on aggregate. </t>

          <t>Rate control: All functions directly responsible for controlling
          media encoder and/or other source or sink for media. As bandwith
          estimation can be on aggreate of media streams it is also
          reponsibility of this component to distribute available bandwidth
          among different media streams. This also includes control of the UDP
          sockets including packet scheduling for traffic shaping/pacing.</t>

          <t>Shared State: Storage and exchange of congestion control state
          for multiple flows within the application and beyond it.</t>

          <t>OS: Operating System containing the UDP socket interface and
          other network functions such as ECN, DSCP, physical interface
          events, interface-level traffic shaping and packet scheduling,
          etc.</t>
        </list></t>
    </section>

    <section title="Funtional Model">
      <t>A more desintregated funtional model</t>

      <t><figure>
          <artwork><![CDATA[  ----------------------------    -----------------------------
     |       Video encoder      |    |        Video encoder      |
     ----------------------------    -----------------------------
      ^                |       ^      ^                 |       ^
   (1)|             (2)|    (3)|   (1)|              (2)|    (3)|
      |               RTP      |      |                RTP      |
      |                V       |      |                 V       | 
      |          ------------- |      |           ------------- |
 -----------     |           |--  -----------     |           |--
 | Rate    | (4) |   Queue   |    | Rate    | (4) |   Queue   |
 | control |<----|           |    | control |<----|           |
 |         |     |RTP packets|    |         |     |RTP packets|
 -----------     |           |    -----------     |           |
                 -------------                    -------------
                       |                                |
                       ---------------     --------------       
                                  (5)|     |(5)
                                    RTP   RTP
                                     |     |
                                     v     v   
        --------------          ----------------
        |  Network   |    (8)   | Transmission |
        | congestion |<-------->|   scheduler  |
        |  control   |          |              | 
        --------------          ----------------
             ^                         |
             |         (7)             |(6) 
             ---------RTCP----------  RTP
                                   |   |
                                   |   v
                               -------------
                               |    UDP    |
                               |  socket   |
                               -------------]]></artwork>
        </figure></t>
    </section>

    <section title="Congestion Control">
      <t></t>

      <section title="Congestion detection">
        <t></t>
      </section>

      <section title="Bandwidth estimation">
        <t></t>
      </section>
    </section>

    <section title="Rate Control">
      <t></t>

      <section title="Handling Overshoot or Undershoot by the Encoder">
        <t></t>
      </section>
    </section>

    <section title="Shared state">
      <t></t>
    </section>

    <section anchor="Acknowledgements" title="Acknowledgements">
      <t>The RMCAT design team discussions contributed to this memo.</t>
    </section>

    <!-- Possibly a 'Contributors' section ... -->

    <section anchor="IANA" title="IANA Considerations">
      <t>This memo includes no request to IANA.</t>
    </section>

    <section anchor="Security" title="Security Considerations">
      <t>TBD</t>
    </section>
  </middle>

  <back>
    <references title="Normative References">
      <?rfc include="reference.I-D.ietf-rmcat-cc-requirements"?>

      <?rfc include="reference.I-D.ietf-rmcat-eval-criteria"?>

      <?rfc include="reference.I-D.ietf-avtcore-rtp-circuit-breakers"
?>

      <?rfc include="reference.RFC.2119"?>

      <?rfc include="reference.RFC.3550"?>

      <?rfc include="reference.RFC.3551"?>

      <?rfc include="reference.RFC.4585"?>

      <?rfc include="reference.RFC.5104"?>

      <?rfc include="reference.RFC.4566"?>

      <?rfc include="reference.RFC.5506"?>

      <?rfc include="reference.RFC.5761"?>

      <?rfc include="reference.RFC.5450"?>
    </references>

    <references title="Informative References">
      <?rfc include="reference.RFC.0768"?>

      <?rfc include="reference.RFC.5681"?>

      <?rfc include="reference.RFC.4340"?>

      <?rfc include="reference.RFC.5348"?>

      <?rfc include="reference.RFC.5109"?>

      <?rfc include="reference.RFC.6865"?>

      <?rfc include="reference.RFC.6330"?>

      <?rfc ?>
    </references>
  </back>
</rfc>
