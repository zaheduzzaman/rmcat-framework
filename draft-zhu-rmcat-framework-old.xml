<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd">
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<!-- used by XSLT processors -->
<?rfc strict="yes" ?>
<!-- give errors regarding ID-nits and DTD validation -->
<!-- control the table of contents (ToC) -->
<?rfc toc="yes"?>
<!-- generate a ToC -->
<?rfc tocdepth="4"?>
<!-- the number of levels of subsections in ToC. default: 3 -->
<!-- control references -->
<?rfc symrefs="yes"?>
<!-- use symbolic references tags, i.e, [RFC2119] instead of [1] -->
<?rfc sortrefs="yes" ?>
<!-- sort the reference entries alphabetically -->
<!-- control vertical white space 
     (using these PIs as follows is recommended by the RFC Editor) -->
<?rfc compact="yes" ?>
<!-- do not start each main section on a new page -->
<?rfc subcompact="no" ?>
<!-- keep one blank line between list items -->
<!-- end of list of popular I-D processing instructions -->
<rfc category="info" docName="draft-zhu-rmcat-framework-00"
     ipr="trust200902">
  <!-- category values: std, bcp, info, exp, and historic
     ipr values: full3667, noModification3667, noDerivatives3667
     you can add the attributes updates="NNNN" and obsoletes="NNNN" 
     they will automatically be output with "(if approved)" -->

  <front>
    <!-- The abbreviated title is used in the page header - it is only necessary if the
     full title is longer than 39 characters -->

    <title abbrev="RMCAT framework">Framework for Real-time Media Congestion
    Avoidance Techniques</title>

    <!-- add 'role="editor"' below for the editors if appropriate -->

    <!-- Another author who claims to be an editor -->
    <author fullname="Xianqing Zhu" initials="X" surname="Zhu">
      <organization>Cisco Systems</organization>

      <address>
        <postal>
          <street>12515 Research Blvd., Building 4</street>
          <city>Austin</city>
          <region>TX</region>
          <code>78759</code>
          <country>USA</country>
        </postal>

        <phone></phone>

        <facsimile></facsimile>

        <email>xiaoqzhu@cisco.com </email>

        <uri></uri>
      </address>
    </author>


    <author fullname="Zaheduzzaman Sarker" initials="Z." surname="Sarker">
      <organization>Ericsson AB</organization>

      <address>
        <postal>
          <street></street>

          <city>Luleae</city>

          <region></region>

          <code></code>

          <country>Sweden</country>
        </postal>

        <phone></phone>

        <email>zaheduzzaman.sarker@ericsson.com</email>
      </address>
    </author>

    <date day="" month="" year="2016" />

    <!-- If the month and year are both specified and are the current ones, xml2rfc will fill
     in the current day for you. If only the current year is specified, xml2rfc will fill
	 in the current day and month for you. If the year is not the current one, it is 
	 necessary to specify at least a month (xml2rfc assumes day="1" if not specified for the 
	 purpose of calculating the expiry date).  With drafts it is normally sufficient to 
	 specify just the year. -->

    <!-- Meta-data Declarations -->

    <area>RAI</area>

    <workgroup>RMCAT WG</workgroup>

    <!-- WG name at the upperleft corner of the doc,
     IETF is fine for individual submissions.
	 If this element is not present, the default is "Network Working Group",
     which is used by the RFC Editor as a nod to the history of the IETF. -->

    <keyword>RTP</keyword>

    <!-- Keywords will be incorporated into HTML output
     files in a meta tag but they have no effect on text or nroff
     output. If you submit your draft to the RFC Editor, the
     keywords will be used for the search engine. -->

    <abstract>

    <t>Congestion control is an essential element in ensuring fair bandwidth
       usage and preventing congesion collapse for traffic sharing the Internet.
       For interactive real-time media traffic such as video conferencing,
       design of congestion control solution also needs to account for
       many other factors such as the requirement for low latency packet delivery
       and interactions with live video encoder. 

       This document describes a common framework with core functional
       building blocks for proposed real-time media congestion solutions.
     </t>

    </abstract>
  </front>

  <middle>
    <section title="Introduction">

    <t>Given increasing amount of interactive real-time media traffic
       over the Internet, such as video conferencing, it is important
       that these applications employ proper congestion control
       mechanisms so to avoid congestion collapse. The RTP Media
       Congestion Avoidance Techniques (RMCAT) working group was
       chartered to develop and standardize an effective congestion
       control solution. The working group document 
       <xref target="I-D.ietf-rmcat-cc-requirements"></xref>
       specifies the list of requirements of a viable solution.</t>

    <t>This document outlines a common framework for candidate
       congestion control solutions currently considered by
       the RMCAT working group. The framework contains several
       functionals modules that are needed for properly
       interacting with live media/video codec and network
       transport.</t>

    </section>

    <section title="Key Words for Requirements">
      <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <xref
      target="RFC2119"></xref>.</t>
    </section>

    <section title="Funtional Modules">
   

        <t><figure anchor="fig-rmcat-solution-framework"
                   title="RMCAT Solution Framework at the Sender">
     
<artwork><![CDATA[

                                             RTCP Feedback
                            +-------------+     Reports
+---------+                 |   Network   |<----------------           
| Video   |<------+         |  Congestion |
| Encoder |       |         |  Controller |<---------------- 
+---------+       |(2)      +-------------+   Shared States
    ||            |                |   
    ||            |                | (1)  
    ||        +------------+       |      +--------------+
(4) ||        | Video Rate |<------+----->| Sending Rate |
    ||        | Controller |<--------+--->| Controller   | 
    ||        +------------+         |    +--------------+
    ||                           (3) |        |   (5) 
    ||                               |       \|/         
    ||                            +---------------+   
    \\==========================> |  Transmission | 
                /===============> |      Queue    |=========>
                ||      (6)       +---------------+         
                ||
     (1)  +--------------+
   ------>| FEC/Padding  |
          |   Packet     |
   ------>|  Generator   | 
     (2)  +--------------+

]]></artwork></figure></t>

<t><xref target="fig-rmcat-solution-framework"></xref> shows
necessary components needed at the sender in a given RMCAT
candidate solution.  Note that the video encoder is out of
scope for RMCAT and is not part of the solution; it is drawn
here for the sake of completeness in explanation of
interactions between modules. </t>

<t>List of modules in the framework: </t> 

<t><list style="symbols">

<t>Network Congestion Controller: this is the
core module for calculating a reference rate (1)
based on periodic RTCP feedback reports from 
the receiver, as well as shared states of other flows
in the same application sharing the same transport.
It contains functions and calculations required to
detect congestion and estimate available bandwidth
on the transport. The statistics gather via RTCP
feedback reports are fed to this module for such
purpose. Different RMCAT solutions employ different
algorithms in detecting congestion and estimating
available bandwidth for its media flow. It also
possible that multiple media streams are multplexed
over a single transport, hence share the same congestion
control module in aggregation. 
</t>

<t>Video Rate Controller: this module makes further
adjustments to the recommended reference rate
provided by the Network Congestion Controller
and submits a target video rate (2) to the video
encoder. Its presence is needed since a live
video encoder cannot always precisely follow
an arbitrary rate update request. The target
video rate is typically also influenced by
the occupancy level (3) in the Transmission
Queue. </t>

<t>Sending Rate Controller: This module controls
the pacing of outgoing packets based on both recommended
reference rate (1) by the Network Congestion Controller
and current occupancy level (3) in the Transmission
Queue. In the case where multiple media streams share
a single transport and a common Network Congestion
Controller (for estimating available bandwidth
in aggregation), the Sending Rate Controller
is also responsible for distributing available
bandwidth amongst different media streams according
to their relative priorities. </t>

<t>Transmission Queue: this module is needed
to absorb the instantaneous mismatch between
video encoder output and regulated outgoing
traffic. The Transmission Queue schedules outgoing
traffic according to sending rate (3) recommended
by the Sending Rate Controller. It reports
its occupancy level (5) to both the Video
Rate Controller and Sending Rate Controller. 
</t>

<t>Video Encoder: the Video Encoder adjusts the
its encoding parameters according to the target
video rate (2) calculated by the Video Rate
Controller. The output rate from the Video Encoder
may deviate from this target. Note that internal 
operations of the Video Encoder (e.g., how video
encoder rate control works) is out of scope for
RMCAT. This module is included here for ease 
of discussions.  
</t>

<t>FEC/Padding Packet Generator: During periods of
bandwidth probing or when forward error protection is
needed during periods of likely packet losses, additional
padding or forward error correction (FEC) packets are
generated by the FEC/Padding Packet Generator. While
RMCAT solutions do not specify how what FEC scheme 
to use, nor how dummy/padding packets should be generated,
a complete congestion control solution may specify
total rate of the FEC/Padding packets based on both
the reference rate (1) from the Network Congestion
Controller and the target video rate (2) from the
Video Rate Controller.   
</t>

</list></t>


<t>[Editor's Note: Following figures are kept here for ease of reference. ]</t>
        
<t><figure anchor="fig-nada-sender"
                   title="NADA Sender Structure">
     
<artwork><![CDATA[
                   +----------------+             
                   |  Calculate     | <---- RTCP report
                   | Reference Rate | 
                   -----------------+
                           | r_ref
              +------------+-------------+
              |                          |
             \|/                        \|/
      +-----------------+           +---------------+
      | Calculate Video |           |   Calculate   |
      |  Target Rate    |           | Sending Rate  |
      +-----------------+           +---------------+
          |        /|\                 /|\      |   
    r_vin |         |                   |       |
         \|/        +-------------------+       |       
      +----------+          | buffer_len        |  r_send
      |  Video   | r_vout  -----------+        \|/
      |  Encoder |-------->   |||||||||=================>  
      +----------+         -----------+    RTP packets     
                          Rate Shaping Buffer                   
]]></artwork></figure></t>

      <t><figure anchor = "fig-scream-modules"
		 title = "Functional Modules in SCReAM">
          <artwork><![CDATA[  ----------------------------    -----------------------------
     |       Video encoder      |    |        Video encoder      |
     ----------------------------    -----------------------------
      ^                |       ^      ^                 |       ^
   (1)|             (2)|    (3)|   (1)|              (2)|    (3)|
      |               RTP      |      |                RTP      |
      |                V       |      |                 V       | 
      |          ------------- |      |           ------------- |
 -----------     |           |--  -----------     |           |--
 | Rate    | (4) |   Queue   |    | Rate    | (4) |   Queue   |
 | control |<----|           |    | control |<----|           |
 |         |     |RTP packets|    |         |     |RTP packets|
 -----------     |           |    -----------     |           |
                 -------------                    -------------
                       |                                |
                       ---------------     --------------       
                                  (5)|     |(5)
                                    RTP   RTP
                                     |     |
                                     v     v   
        --------------          ----------------
        |  Network   |    (8)   | Transmission |
        | congestion |<-------->|   scheduler  |
        |  control   |          |              | 
        --------------          ----------------
             ^                         |
             |         (7)             |(6) 
             ---------RTCP----------  RTP
                                   |   |
                                   |   v
                               -------------
                               |    UDP    |
                               |  socket   |
                               -------------]]></artwork>
        </figure></t>
    </section>

    <section title="Congestion Control">
      <t></t>

      <section title="Congestion detection">
        <t></t>
      </section>

      <section title="Bandwidth estimation">
        <t></t>
      </section>
    </section>

    <section title="Rate Control">
      <t></t>

      <section title="Handling Overshoot or Undershoot by the Encoder">
        <t></t>
      </section>
    </section>

    <section title="Shared state">
      <t></t>
    </section>

    <section anchor="Acknowledgements" title="Acknowledgements">
      <t>The RMCAT design team discussions contributed to this memo.</t>
    </section>

    <!-- Possibly a 'Contributors' section ... -->

    <section anchor="IANA" title="IANA Considerations">
      <t>This memo includes no request to IANA.</t>
    </section>

    <section anchor="Security" title="Security Considerations">
      <t>TBD</t>
    </section>
  </middle>

  <back>
    <references title="Normative References">
      <?rfc include="reference.I-D.ietf-rmcat-cc-requirements"?>

      <?rfc include="reference.I-D.ietf-rmcat-eval-criteria"?>

      <?rfc include="reference.I-D.ietf-avtcore-rtp-circuit-breakers"
?>

      <?rfc include="reference.RFC.2119"?>

      <?rfc include="reference.RFC.3550"?>

      <?rfc include="reference.RFC.3551"?>

      <?rfc include="reference.RFC.4585"?>

      <?rfc include="reference.RFC.5104"?>

      <?rfc include="reference.RFC.4566"?>

      <?rfc include="reference.RFC.5506"?>

      <?rfc include="reference.RFC.5761"?>

      <?rfc include="reference.RFC.5450"?>
    </references>

    <references title="Informative References">
      <?rfc include="reference.RFC.0768"?>

      <?rfc include="reference.RFC.5681"?>

      <?rfc include="reference.RFC.4340"?>

      <?rfc include="reference.RFC.5348"?>

      <?rfc include="reference.RFC.5109"?>

      <?rfc include="reference.RFC.6865"?>

      <?rfc include="reference.RFC.6330"?>

      <?rfc ?>
    </references>
  </back>
</rfc>
